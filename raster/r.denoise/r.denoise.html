<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html>
<head>
<title>GRASS GIS manual: r.denoise</title>
<meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1">
<link rel="stylesheet" href="grassdocs.css" type="text/css">
</head>
<body bgcolor="white">

<img src="grass_logo.png" alt="GRASS logo"><hr align=center size=6 noshade>

<h2>NAME</h2>
<em><b>r.denoise</b></em>  - Denoise (smooth / despeckle) a raster surface using Sun et al.'s (2007) <a href="http://www.cs.cf.ac.uk/meshfiltering/index_files/Page342.htm">denoising algorithm</a>.
<h2>KEYWORDS</h2>
raster, denoise, smooth, filter, speckle, SRTM
<h2>SYNOPSIS</h2>
<b>r.denoise</b><br>
<b>r.denoise help</b><br>
<b>r.denoise</b> <b>input</b>=<em>string</em> <b>output</b>=<em>string</em>  [<b>iterations</b>=<em>integer</em>]   [<b>threshold</b>=<em>float</em>]   [<b>epsg</b>=<em>integer</em>]   [--<b>overwrite</b>]  [--<b>verbose</b>]  [--<b>quiet</b>] 

<h3>Flags:</h3>
<DL>
<DT><b>--overwrite</b></DT>
<DD>Allow output files to overwrite existing files</DD>
<DT><b>--verbose</b></DT>
<DD>Verbose module output</DD>
<DT><b>--quiet</b></DT>
<DD>Quiet module output</DD>
</DL>

<h3>Parameters:</h3>
<DL>
<DT><b>input</b>=<em>string</em></DT>
<DD>Raster input map</DD>

<DT><b>output</b>=<em>string</em></DT>
<DD>Denoised raster output map</DD>

<DT><b>threshold</b>=<em>float</em></DT>
<DD>Edge-sharpness threshold</DD>
<DD>Options: <em>0-1</em></DD>
<DD>Default: <em>0.93</em></DD>

<DT><b>iterations</b>=<em>integer</em></DT>
<DD>Number of normal-updating iterations</DD>
<DD>Options: <em>1-50</em></DD>
<DD>Default: <em>5</em></DD>

<DT><b>epsg</b>=<em>integer</em></DT>
<DD>EPSG projection code (required if current location is not projected)</DD>

</DL>

<h2>REQUIREMENTS</h2>
<em><b>r.denoise</em></b> requires that <em>mdenoise</em>, the executable version of Sun et al.'s (2007) denoising algorithm, is available on the $PATH.  <em>mdenoise</em> can be compiled and installed as follows:

<div class="code"><pre>
wget http://www.cs.cf.ac.uk/meshfiltering/index_files/Doc/mdsource.zip
unzip mdsource.zip
cd mdenoise
g++ -o mdenoise mdenoise.cpp triangle.c
ln -s `pwd`/mdenoise /some/directory/on/the/$PATH
</pre></div>

<h2>DESCRIPTION</h2>

<p>
Sun et al.'s (2007) <a href="http://www.cs.cf.ac.uk/meshfiltering/index_files/Page342.htm">denoising algorithm</a> is a feature-preserving mesh denoising algorithm that smooths the surfaces of computer models of three dimensional objects such as those used in computer-aided design and graphics.  It removes random noise while preserving sharp features and smoothing with minimal changes to the original data. <em>r.denoise</em> is a UNIX shell script that allows the algorithm to be run on DEMs from within <em>GRASS</em>.  Denoising DEMs can improve clarity and quality of derived products such as slope and hydraulic maps.
<p>
The amount of smoothing is controlled by the <em>threshold</em> and <em>iterations</em> parameters.  Increasing the <em>threshold</em> decreases how sharp a feature needs to be to be preserved e.g. decreases the smoothing.  To preserve ridge crests in mountain areas, T > 0.9 is recommended. Setting T too high results in the preservation of noise.  For SRTM data, which is already partly smoothed by NASA, T = 0.99 can be used.  Increasing the number of <em>iterations</em> increases the smoothing and the range of spatial correlation of the output dataset.  A small number, e.g. 5 or fewer, typically gives the best results.  See the REFERENCES for more detailed information.

<h2>NOTES</h2>
<p>
<em>r.denoise</em> works with a cartesian coordinate system.  Thus data in geographic (lat-long) coordinates require projection during processing.  The script is able to do this if the <a href="http://www.epsg-registry.org/">EPSG code</a> of a suitable coordinate system is provided.

<h2>REFERENCES</h2>
<ul>
	<li>For further information on denoising DEMs, see: <a href="http://personalpages.manchester.ac.uk/staff/john.stevenson/mdenoise">Using Sun's denoising algorithm on topographic data</a>.
	<li>Sun X, Rosin PL, Martin RR, Langbein FC (2007) Fast and Effective Feature-Preserving Mesh Denoising. IEEE Transactions on Visualisation and Computer Graphics, 13(5):925-938</li>
	<li>Stevenson JA, Sun X, Mitchell NC. Despeckling SRTM and other topographic data with a denoising algorithm. In review: Geomorphology.</li>
</ul>

<H2>SEE ALSO</H2>
<EM>
<A HREF="r.stats.html">r.stats</A>,
<A HREF="r.in.xyz.html">r.in.xyz</A>,
<A HREF="r.neighbors.html">r.neighbors</A>,
<A HREF="r.topidx.html">r.topidx</A>,
</EM>

<H2>AUTHOR</H2>
John A Stevenson - Manchester University<br><br>
The module was written as part of a project funded by <A href="http://www.epsrc.ac.uk">EPSRC</A> Grant no. EP/C007972/1 (P.I. Paul Rosin, Cardiff University).

</body>
</html>
