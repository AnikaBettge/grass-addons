<h2>DESCRIPTION</h2>
<p>
Module r.stream.snap is a supplementary module for r.stream.extract and
r.stream.basins to correct position of outlets or stream init points as they do
not lie on the streamlines.
<br>
For outlets situation is clear. Points are snapped to nearest point which lies
on the streamline. In situation where there can be a small tributuary nearer
than main stream accumulation treshold shall be high enough to force program
ignoring this tributuary and snap to the main stream. If there is no
accumulation map points will be snapped to nearest stream line which in
particular situation may be wrong. Bacuase r.stream is prepared to work with
MFD accum maps, both stream network and accum map is neccessary to resolve the
problem.
<br>
While it is assumed accum map is a MFD map, if stream network is not supplied,
snap point is calculated in different way: treshold is used to select only these
points in search radius which are accum value is greater than treshold. Next
mean value of these points is calculated and its value is taken as a new
treshold. This procedure guarantee that points are snapped to the center of
stream tube. While for inits small tresholds are in use, it is probable than
points were snapped to the streamtube border instead of its center.
</p>
<p>
It is strongly recommended, to use both stream network (even pre-generated with
small accum treshold) and accumulation map, than accum or stream map only.
</p>

<h2>OPTIONS</h2>
<dl>
<dt><b>streams</b></dt>
<dd>Stream network created by r.stream.extract or r.watershed. If used, points
are snapped to the nearest streamline point which accumulation is greater than
treshold. If accumulation is not used point is snapped to the nearest stream.
</dd>

<dt><b>accum</b></dt>
<dd>Accumulation map created with r.watershed and used to generate stream network
with r.stream.extract. If stream network is not in use, point is adaptively
snapped to the to point where value is greater than mean values of accumulation
greater than given treshold in a searcyh radius. See description for details.
</dd>
<dt><b>radius</b></dt>
<dd>Search radius (in cells). If there are no streams in search radius, point is
not snapped. If there are no cells with accumulation greater than accumtreshold
point also is not snapped.
</dd>

<dt><b>accumtres</b></dt>
<dd>Minimum value of accumulation which cell must have to snap point. This
option is added to snap stream inits to the stream tubes and to distinguish
between local tributaries and main streams.
</dd>

<dt><b>input</b></dt>
<dd>Vector file containing outlets or inits as vector points. Only point's
categories are used Table attached to it is ignored. Every point shall have his
own unique category.
</dd>
</dl>


<h2>OUTPUTS</h2>
<p>Vector file containing outlets or inits after snapping. On layer 1 original
categories are preserved, on layer 2 there are four categories which mean:</p>
<ol>
<li>skipped (not in use yet)
<li>unresolved (points remain unsnapped due to lack of streams in search radius
<li>snapped (points snapped to streamlines)
<li>correct (points whcich remain on its original position, which was
originally corrected
</ol>


<h2>SEE ALSO</h2>

<em>
<a href="r.watershed.html">r.watershed</a>,
<a href="r.stream.extract.html">r.stream.extract</a>,
<a href="r.stream.basins.html">r.stream.basins</a>,
<a href="r.stream.order.html">r.stream.order</a>,
<a href="r.stream.stats.html">r.stream.stats</a>,
<a href="r.mapcalc.html">r.mapcalc</a>,
<a href="r.reclass.html">r.reclass</a>,
<a href="r.patch.html">r.patch</a>
</em>

<h2>AUTHOR</h2>
Jarek Jasiewicz, Adam Mickiewicz University, Geoecology and Geoinformation
Institute.

<p><i>Last changed: $Date$</i>

