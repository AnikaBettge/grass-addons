<h2>DESCRIPTION</h2>
<p>
Module <em>r.stream.channel</em> is prepared to calculate some local properties of the
stream network. It is supplementary module for <em>r.stream.order</em>, and
<em>r.stream.distance</em> to investigate channel subsystem. For slope subsystem
parameters is <em>r.stream.slope</em>. It may use ordered or unordered network. It
calculate parameters for every segment between it init to outlet/join to the
next stream. it also may calculate parameters between outlet and segment's init.
It can calculate parameters for every orders but best results are for these
orders where order remains unchanged from stream init to natural outlet (Hack
and Horton ordering).
<p>

<h2>OPTIONS</h2>
<dl>
<dt><b>-l</b></dt>
<dd>Calculate local values. See output for details.</dd>
<dt><b>-c</b></dt>
<dd>Calculate distance in cells instead of meters. See output for details.</dd>
<dt><b>-d</b></dt>
<dd>Calculate downstream distance (from current cell DOWNSTREAM to outlet/join).
Default is upstream (from current cell upstream to init/join.</dd>
<dt><b>-m</b></dt>
<dd>Only for very large data sets. Use segment library to optimize memory
consumption during analysis</dd>
<dt><b>stream_rast</b></dt>
<dd>Stream network: name of input stream map. Map may be ordered according one
of the <em>r.stream.order</em> ordering system as well as unordered (with original stream
identifiers). Because streams network produced by <em>r.watershed</em> and
<em>r.stream.extract</em> may slightly differ in detail it is required to use both stream
and direction map produced by the same module. Stream background shall have NULL
value or zero value. Background values of NULL are by default produced by
<em>r.watershed</em> and <em>r.stream.extract</em>. If not 0 or NULL use <em><a
href="r.mapcalc.html">r.mapcalc</a></em> to set background values to null.  
</dd>
<dt><b>direction</b></dt>
<dd>Flow direction: name of input direction map produced by r.watershed or
<em>r.stream.extract</em>. If <em>r.stream.extract</em> output map is used, it only has non-NULL
values in places where streams occur. NULL (nodata) cells are ignored, zero and
negative values are valid direction data if they vary from -8 to 8 (CCW from
East in steps of 45 degrees). Direction map shall be of type CELL values. Region
resolution and map resolution must be the same. 
Also <em>stream</em> network map must have the same resolution. It is checked by
default. If resolutions differ the module informs about it and stops. Region
boundary and maps boundary may be differ but it may lead to unexpected
results.</dd>
<dt><b>elevation</b></dt>
<dd>Elevation: name of input elevation map. Map can be of type CELL, FCELL or
DCELL. It is not restricted to resolution of region settings as streams and
direction.</dd>
</dl>
<h2>OUTPUTS</h2>
<dl>
<dt><b>distance</b></dt>
<dd>Upstream distance of current cell to the init/join. Flag modifications: <br>
<b>d:</b> downstream distance of current cell to the join/outlet;<br>
<b>l:</b> local distance between current cell and next cell. In most cases cell
resolution and sqrt2 of cell resolution. useful when projection is LL or NS and
WE resolutions differs. Flag d ignored<br>
<b>c:</b> distance in cells. Map is written as double. Use <em>r.mapcalc</em> to convert
to integer. Flags l and d ignored.<br>
</dd>
<dt><b>difference</b></dt>
<dd>Upstream elevation difference between current cell to the init/join. It we
need to calculate parameters different than elevation. If we need to calculate
different parameters than elevation along streams (for example precipitation or
so) use necessary map as elevation. Flag modifications: <br>
<b>d:</b> downstream difference of current cell to the join/outlet;<br>
<b>l:</b> local difference between current cell and next cell. With flag
calculates difference between previous cell and current cell<br>
<b>c:</b> Ignored.
</dd>
<dt><b>gradient</b></dt>
<dd>Upstream mean gradient between current cell and the init/join.  Flag
modifications: <br>
<b>d:</b> downstream mean gradient between current cell and the the
join/outlet;<br>
<b>l:</b> local gradient between current cell and next cell. Flag d ignored<br>
<b>c:</b> Ignored.
</dd>
<dt><b>curvature</b></dt>
<dd>Local stream course curvature  of current cell. Calculated according
formula: <i>first_derivative/(1-second_derivative<sup>2</sup>)<sup>3/2</sup></i>
Flag modifications: <br>
<b>d:</b> ignored;<br>
<b>l:</b> Ignored.<br>
<b>c:</b> Ignored.
</dd>
<dt><b>identifier</b></dt>
<dd> Integer map: In ordered stream network there are more than one segment
(segment: a part of the network where order remains unchanged) with the same
order. To identify particular segments (for further analysis) every segment
receive his unique identifier.</dd>
</dl>

<h2>EXAMPLE</h2>

This example shows how to visualise the change of gradient map along the main
stream of the catchment:

<div class="code"><pre>
g.region -p -a rast=elevation align=elevation
r.watershed elevation=elevation threshold=10000 drainage=direction stream=streams
r.stream.order streams=streams direction=direction hack=hack
r.stream.channel streams=hack direction=direction elevation=elevation identifier=stream_identifier distance=stream_distance gradient=stream_gradient
#495 is a stream identifier. May be different in different situation
r.mapcalc stgrad=if(stream_identifier==495,float(stream_gradient),null())
r.mapcalc stdist=if(stream_identifier==495,float(stream_distance),null())

#the rest data processing in R
R
library(spgrass6)
r=readRAST6(c("stdist","stgrad"),NODATA=-9999)
p=subset(r@data,!is.na(r@data$dist))
sorted=p[order(p$stdist),]
plot(sorted,stdist~stgrad,type="l")
</pre></div>

<h2>SEE ALSO</h2>

<em><a href="r.watershed.html">r.watershed</a>, <a href="r.stream.extract.html">r.stream.extract</a>, <a href="r.stream.order.html">r.stream.order</a>, <a href="r.stream.basins.html">r.stream.basins</a>, <a href="r.stream.slope.html">r.stream.slope</a>, <a href="r.stream.stats.html">r.stream.stats</a>, <a href="r.mapcalc.html">r.mapcalc</a>
</em>

<h2>AUTHOR</h2>
Jarek Jasiewicz, Adam Mickiewicz University, Geoecology and Geoinformation
Institute.

<p><i>Last changed: $Date$</i>

