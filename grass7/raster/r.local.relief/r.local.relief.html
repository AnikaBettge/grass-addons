<h2>DESCRIPTION</h2>

<p><em>r.local.relief</em> generates a local relief model (LRM) from lidar-derived high-resolution DEMs. Local relief models enhance the visibility of small-scale surface features by removing large-scale landforms from the DEM.</p>

<p>Generating the LRM is accomplished in 7 steps (Hesse 2010:69):</p>
<ol>
    <li>Creation of the DEM from the LIDAR data. Buildings, trees and other objects on the earth's surface should be removed.</li>
    <li>Apply a low pass filter to the DEM. The low pass filter approximates the large-scale landscape forms. The kernel size of the low pass filter determines the scale of features that will be visible in the LRM. A default kernel size of 25 is used.</li>
    <li>Subtract the low-pass filter result from the DEM to get the local relief.</li>
    <li>Extract the zero contour lines from the difference map.</li>
    <li>Extract the point elevations from the DEM along the zero contour lines.</li>
    <li>Create a purged DEM from the point elevations extracted in the last step. This layer represents the large-scale landscape forms that will be removed to expose the local relief in the final step. v.surf.bspline is used to interpolate the points to a raster.</li>
    <li>Subtract the purged DEM from the original DEM to get the local relief model.
</ol>
Note that these steps are not completely valid for Vaclav's implementation which uses <a href="r.fillnulls.html">r.fillnulls</a> module.

<h2>OUTPUT</h2>
<p>
The final local relief model gets the name specified by the <em>output</em> parameter.
When the <em>-i</em> is specified <em>r.local.relief</em> creates six additional output files one for each step in the LRM creation process. The names consist of the user-specified <em>output</em> parameter and the following suffixes:</p>
<ul>
    <li><tt>_smooth_elevation</tt>: The result of running the low pass filter on the DEM.</li>
    <li><tt>_subtracted_smooth_elevation:s</tt> The result of subtracting the low pass filter map from the DEM.</li>
    <li><tt>_vector_contours:s</tt> The zero contours extracted from the subtracted smooth elevation map.</li>
    <li><tt>raster_contours</tt>: The rasterized zero contours.</li>
    <li><tt>raster_contours_with_values</tt>: The rasterized zero contours with the values from elevation map.</li>
    <li><tt>_purged_elevation:s</tt> The raster interpolated from the raster map based on zero contours map.</li>
</ul>
Note that this is not implemented yet, you must change the variable save_intermediates in the code itself.

<h2>EXAMPLE</h2>

Basic example using the default kernel size of 5:
<div class="code"><pre>
r.local.relief input=elevation output=lrm5
</pre></div>
Example with a custom kernel size of 11:
<div class="code"><pre>
r.local.relief input=elevation output_prefix=lrm11 neighborhood_size=11
</pre></div>

<h2>SEE ALSO</h2>

<em>
<a href="r.shaded.relief.html">r.shaded.relief</a>,
<a href="r.shaded.pca.html">r.shaded.pca</a> (in GRASS Addons)
</em>


<h2>REFERENCES</h2>
<ul>
    <li>Hesse, Ralf (2010). LiDAR-derived Local Relief Models - a new tool for archaeological prospection. <em>Archaeological Prospection</em> 17:67-72.</li>
    <li>Bennett, Rebecca (2011). <em>Archaeological Remote Sensing: Visualization and Analysis of grass-dominated environments using laser scanning and digital spectra data.</em> Unpublished PhD Thesis. Electronic Document, <a href="http://eprints.bournemouth.ac.uk/20459/1/Bennett%2C_Rebecca_PhD_Thesis_2011.pdf">http://eprints.bournemouth.ac.uk/20459/1/Bennett%2C_Rebecca_PhD_Thesis_2011.pdf</a>, Accessed 25 February 2013. (provided bash script with <a href="v.surf.bspline.html">v.surf.bspline</a>-based implementation)</li>
</ul>

<h2>AUTHOR</h2>
<p>
Vaclav Petras, <a href="http://gis.ncsu.edu/osgeorel/">NCSU OSGeoREL</a>,<br/>
Eric Goddard
</p>

<p><i>Last changed: $Date$</i>
