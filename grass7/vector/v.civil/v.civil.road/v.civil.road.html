<h2>DESCRIPTION</h2>

<em>v.civil.road</em> generates a topography edge for design roads, channels 
and ports.
<p>
Applications:

<ul>
	<li>Roads, streets, railroads, walls,...</li>
	<li>Channels, reservoirs, supply and waste water conduction,  ...</li>
	<li>Ports, </li>
</ul>

<h2>USAGE</h2>

To run the program, a map with one polyline (horizontal polygon or edge), is 
required. If a table in layer 1 exist, this will no be overwritten, this layer is
free for store information about the edge by the user.

<p>
There are three options for run the program, Create/Update edge, Update
solution and Insert point in edge layer.


<p>
The <em>-n</em> flag (Create/Update new edge), will convert the polyline 
in a edge, i.e., four tables will be add to the polyline layers map, attached 
to points in its respective layers, where the parameter of the road will be 
stored . This flag must be selected for create a edge from a polyline or if 
the vertices of the edge are moved or added another ones.

<p>
The <em>-u</em> flag "Update solution" will write the selected maps, 
with its additional parameters for some of them, and with the parameters 
included in the tables of the edge.

<p>
The name of the outs maps, by default are selected. If the out name map is
preceded with character "_", this name will be added to the edge name map.
This is useful for change of edges quickly.

<p>
The <em>-i</em> flag (Insert points), new points for defining the road, 
can be added to the layers _Vertical, _Section and _Trans, referencing by pk.

<p>
The user must select the layer and give a list with the pks. The options 
of the fist pk where the new will be inserted, will be copied in the new.

<p>
The other options are described below.


<h3>Plan</h3>


<p>
The <em>-y</em> flag write a 3D polyline edge, in horizontal alignment, with 
the name in <em>plantpoly</em> option (default: <em>NameEdge</em>_plantpoly).

<p>
The <em>-h</em> flag write the edge in horizontal alignment, with the name
in <em>plant</em> option. The map created, contains the segments of the 
alignment and its information is stored in three tables.(default: <em>NameEdge</em>_plan).

<p>
The <em>-k</em> flag write pk marks in horizontal, with the name in 
<em>pks</em> option.(default: <em>NameEdge</em>_Pks).

<p>
The <em>pkopt</em> option define the distance between normal marks (npk),
distance between principal marks (mpk), longitude of normal marks and
longitude of princicipal marks.

<p>
The <em>-d</em> flag write the displaced platform lines in horizontal, 
with the name in <em>displ</em> option.

<p>
The <em>-a</em> flag write an area map with displaced platform lines in 
horizontal, with the name in <em>displ_area</em> option.



<h3>Vertical</h3>


<p>
The <em>-v</em> flag write the vertical alignment in horizontal, with the name
in <em>raised</em> option. The map created, contains the segments of the 
alignment and its information is stored in three tables.(default: <em>NameEdge</em>_Vert)

<p>
The <em>-l</em> flag write the raised of the edge (vertical alignment), the 
terrain profile in a longitudinal profile map, and vertical polygon with the 
names given in <em>LPras</em> ,<em>LPterrain</em> and <em>LPejeref</em> options
(default: <em>NameEdge</em>_LP_Ras, <em>NameEdge</em>_LP_terrain and
<em>NameEdge</em>_LP_Edge).

<p>
The <em>-m</em> flag write the coordinates edges and the profile guitar in the
longitudinal profile with its marks, with the names given in <em>LPedgeX</em>, 
<em>LPedgeX_marks</em>, <em>LPedgeY</em> and <em>LPedgeY_marks</em> options 
(default: <em>NameEdge</em>_LP_EdgeX, <em>NameEdge</em>_LP_EdgeXmarks,
<em>NameEdge</em>_LP_EdgeY and <em>NameEdge</em>_LP_EdgeYmarks).

<p>
With the option <em>LPScale</em>, the vertical scale of the longitudinal profile can be
given.

<p>
The <em>LPopt</em> option give the longitude of marks, distance between marks in edge x
and y, and distance between lines of the guitar.





<h3>Cross</h3>



<p>
The <em>-c</em> flag write the projection of cross section in horizontal, with the name
in <em>cross</em> option, and with the lines selected in <em>cross_opt</em> option.

<p>
The <em>-r</em> flag write a map with points of intersection of displaced lines with 
cross-section lines, in horizontal, with the name in <em>crossdispl</em> option. The
lines that will be crossed are selected in <em>displ_opt</em>



<p>
The <em>-f</em> flag write the raised of cross-section (cross alignment) and the 
terrain profile in a traversal profile map with the 
names given in <em>LTras</em> and <em>LTterrain</em> options
(default: <em>NameEdge</em>_TP_Ras and <em>NameEdge</em>_TP_terrain 

<p>
The <em>-m</em> flag write the coordinates edges and the profile guitar in the
longitudinal profile with its marks, with the names given in <em>LTedgeX</em> and 
<em>LTedgeY</em> options (default: <em>NameEdge</em>_TP_EdgeX and 
<em>NameEdge</em>_TP_EdgeY ).

<p>
With the option <em>LTScale</em>, the vertical scale of the longitudinal profile can be
given.

<p>
The <em>LTopt</em> option give the longitude of marks, distance between marks in edge x
and y, and distance between lines of the guitar.

<p>
The <em>LTopt2</em> option give the number of rows of cross-section to display, 
distance between cross-section in edge x and y.


<h3>Terrain</h3>


<p>
The <em>-t</em> flag write the projection of edge on a DEM (3D line of terrain) 
in horizontal, with the name in <em>outtlong</em> option.

<p>
The <em>-q</em> flag write the projection of transects lines on a DEM (3D lines of terrain) 
in horizontal, with the name in <em>outtcross</em> option.

<p>
The <em>-s</em> flag write the slope soil lines calculated with the last
displaced lines (perpendicular to the edge) in horizontal, with the name
in <em>outslope</em> option

<p>
The <em>-e</em> flag write the areas map with slope soil lines and the last
displaced lines in horizontal, with the name in <em>outslopeareas</em> option

<p>
The <em>-p</em> flag write a 3D points map of lines selected in <em>pts_opt</em> option
in horizontal, with the name in <em>outpoints</em> option

<p>
The <em>-b</em> flag write a 3D lines map of lines selected in <em>break_opt</em> option
in horizontal, with the name in <em>outbreak</em> option

<p>
The <em>-o</em> flag write a hull area map of lines selected in <em>hull_opt</em> option
in horizontal, with the name in <em>outhull</em> option


<h2>Tables</h2>

<p>
Geometric roadway design can be broken into four main parts: horizontal 
alignment, profile (vertical alignment), platforms definition and cross-section. 

There are maps in horizontal 
alignment for display in plan, maps in vertical alignment that requires a 
new display for visualization in profile view, and maps in cross-section that 
requires a new display for visualization in profile cross-section view.

<p>
The tables stored in the edge map are:

<h3>Layer 1:</h3>
<p>
Created with only cat column (if not exist), is for free use to add columns with information 
of the edge.



<h3>Layer 2:</h3> 
<p>
<b>"NameEdge"_Horizontal</b>, for insert the parameters of the horizontal 
alignment. This layer have points in all vertices of the horizontal polygon. 
No more points can be added to this layer.

<p>
The columns for editing by the user are:

	<ul>
		<li><b>radio</b>: radio of curve
			<p>+ for clockwise</p>
			<p>- for anticlockwise</p>
		</li>
		<li><b>a_in</b>: Parameter A of input Clothoid</li>
		<li><b>a_out</b>: Parameter A of output Clothoid</li>
		<li><b>widening</b>: Widening of curve (where this widening is growing 
		in the clothoid, only in mode exact)</li>
	</ul>
					
		
					
<h3>Layer 3:</h3> 
<p>
<b>"NameEdge"_Vertical</b>, for insert the parameters of the vertical 
alignment.This layer are created with the first an last vertices of the 
horizontal polygon. New point can be added by the flag i (Insert point), 
or with edit gui. The added points, are inserted in the edge referencing by pk.

<p>
The columns for editing by the user are:

	<ul>
		<li><b>pk</b>: kilometric point of the edge</li> 
		<li><b>elev</b>: Elevation of the vertice of the vertical alignment</li>
		<li><b>kv</b>: Parameter Kv of the vertical alignment</li>
		<li><b>l</b>: Leng of parabolic curve (no yet implemented)</li>
		<li><b>B</b>: Height of vertice of vertical polygon to the parabolic 
		curve (no yet implemented)</li>
	</ul>
					

	
		
<h3>Layer 4: </h3>

<b>"NameEdge"_Section</b>, for insert the parameters of the platform. 
This layer are created with the first an last vertices of the horizontal 
polygon. New point can be added by the flag i (Insert point), or with edit 
gui. The added points, are inserted in the edge referencing by pk.
<p>
The columns for editing by the user are:

	<ul>
		<li><b>pk</b>: kilometric point of the edge</li> 
		<li><b>sec_left, sec_right</b>: For defining left and right platform 
		lines (distance and height to the edge), separated by ";" </li>
		<li><b>type_left, type_right</b>: Types of left and right lines 
		(types are: l,e,r,0). You can enter	the type of multiple lines 
		separated by ";"
			<b>l</b>: linear approximation between definition points.
			<b>e</b>: displaced edge, mode exact.
			<b>c</b>: ellipse between definition points.
			<b>rR,A</b>: circle between definition points ((x-A)^2+y^2=R^2))</li>
					
		<li><b>cut_left, cut_right</b>: Cut slope left and right </li>
		<li><b>fill_left, fill_right</b>: Fill slope left and right </li>
		<li><b>superelev_left,superelev_right</b>: Superelevation left and right 
		lanes (no yet implemented)</li>	
	</ul>
<p>					
Between two points, if the second input distance equal zero, the line will be 
stopped. If the second input distance equal -1, this point will not be processed
and the next one will be considered.


					
<h3>Layer 5:</h3> 
<p>
<b>"NameEdge"_Tran</b>s, for insert the parameters of transects to the edge. This layer 
are created with the first an last vertices of the horizontal polygon. New point can be added by the flag
i (Insert point), or with edit gui. The added points, are inserted in the edge referencing by pk
<p>
The columns for editing by the user are:
				
					<ul>
					<li><b>pk</b>: kilometric point of the edge</li> 
					<li><b>dist_left,dist_right</b>: Distance left and right from the edge</li>
					<li><b>npk</b>: Distance between trans</li>
					</ul>
					



<h2> AUTHOR</h2>
<p>
Jesus Fernandez-Capel Rosillo<br >
Civil Engineer, Spain<br >
jfc at alcd net<br >


<p><i>Last changed: $Date$</i>
