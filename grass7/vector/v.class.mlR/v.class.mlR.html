<h2>DESCRIPTION</h2>

<p>
<em>v.class.mlR</em> is a wrapper script that uses the R caret package 
for machine learning in R to classify features using training features 
by supervised learning.

<p>The user can provide input either as vector maps, or as csv files, or 
a combination of both. Output can consist of either additional columns in
the vector input map of features, a text file or reclassed raster maps.

<p>Different classifiers are proposed: k-nearest neighbor (knn and knn1 
for k=1), support vector machine with a radial kernel (svmRadial), random 
forest (rf) and recursive partitioning (rpart). Each of these classifiers
is tuned automatically throught repeated cross-validation. See the 
<a href="https://topepo.github.io/caret/index.html">caret webpage</a> for
more information about the tuning parameters for each classifier, and
more generally for the information about how caret works.

<p>The user can chose to include the individual classifiers results in
the output using the <em>i</em> flag, but by default the output will be
the result of a voting scheme merging the results of the different 
classifiers. The voting schemes available are: simple majority vote without 
weighting (smv), simple weighted majority vote (swv), best-worst weighted 
vote (bwwv) and quadratic best-worst weighted vote (qbwwv). For more details
about these voting schemes see [TODO: include reference].

<p>In the output (as attribute columns or text file) each weighting schemes 
result is provided accompanied by an estimation of the probability of the
classification, based on the equation used in [TODO: include reference].

<p>Optional output of the module include a box-and-whisker plot indicating
the variance of the cross-validation results for each classifier 
(<em>bw_plot_file</em>) and a csv file containing accuracy measures (overall
accuracy and kappa) for each classifier (<em>accuracy_file</em>). The user
can also chose to write the R script constructed and used internally to a text
file for study or further modification.

<h2>NOTES</h2>

<p>
The module can be used in a tool chain together with <a href="i.segment.html">i.segment</a>
and the addon <em>i.segment.stats</em> for object-based classification of 
satellite imagery.

<h2>DEPENDENCIES</h2>

<p>This modules uses R. The following R-packages have to be installed to be able to use this
module: 'caret', 'kernlab', 'randomForest', 'rpart', 'ggplot2', 'lattice'.

<h2>TODO</h2>

Add automagic installation of missing R packages.

<h2>EXAMPLE</h2>

<p>
Using existing vector maps as input and writing the output to the attribute table of the segments map, including the individual classifier results:
<div class="code"><pre>
v.class.mlR segments_map=seg training_map=training train_class_column=class weighting_mode=smv,swv,qbwwv -i
</pre></div>

<p>
Using text files with segment characteristics as input and writing output to raster files and a csv file
<div class="code"><pre>
v.class.mlR segments_file=segstats.csv training_file=training.csv train_class_column=class weighting_mode=smv,swv,qbwwv raster_segments_map=seg classified_map=vote classification_results=class_results.csv
</pre></div>

<h2>SEE ALSO</h2>

<em>
<a href="i.segment.html">i.segment</a>,
</em>

<h2>AUTHOR</h2>
Moritz Lennert, Universit√© Libre de Bruxelles (ULB)
based on an initial R-script by Ruben Van de Kerckove, also ULB at the time


<p><i>Last changed: $Date$</i>
